<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Acre</title>
    <!-- Google Fonts for the pixelated style -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Link to your external stylesheet -->
    <link rel="stylesheet" href="style.css">
    <!-- Tailwind CSS for utility classes -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-800 flex items-center justify-center h-screen w-screen">

    <!-- Main Menu -->
    <div id="main-menu" class="text-center">
        <div class="parallax-bg">
            <div id="parallax-hills" class="parallax-layer"></div>
            <div id="parallax-trees" class="parallax-layer"></div>
        </div>
        <div class="relative z-10">
            <h1 class="text-6xl md:text-8xl mb-12" style="text-shadow: 4px 4px #222;">Acre</h1>
            <div class="space-y-4 flex flex-col items-center">
                <button id="host-btn" class="pixel-button w-64">Host New World</button>
                <button id="join-btn" class="pixel-button w-64">Join World</button>
            </div>
             <p id="loading-status" class="mt-8 text-xs text-gray-400">Loading...</p>
        </div>
    </div>

    <!-- Join World Modal -->
    <div id="join-world-modal" class="hidden absolute z-30 inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="modal text-center space-y-4">
            <h2 class="text-2xl">Join World</h2>
            <input type="text" id="world-code-input" placeholder="Enter World Code" class="pixel-input text-center uppercase" maxlength="6">
            <div class="flex gap-4">
                <button id="join-confirm-btn" class="pixel-button">Join</button>
                <button id="join-cancel-btn" class="pixel-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Game Container -->
    <div id="game-container" class="hidden w-full h-full relative">
        <canvas id="game-canvas"></canvas>
        
        <!-- In-Game HUD -->
        <div id="hud" class="w-full h-full absolute top-0 left-0 pointer-events-none">
            <!-- Health -->
            <div id="health-bar" class="hud-element top-4 left-4 flex gap-1 text-2xl"></div>

            <!-- Hotbar -->
            <div id="hotbar" class="hud-element bottom-4 left-1/2 -translate-x-1/2 flex gap-2 pointer-events-auto"></div>

            <!-- Pause Button -->
            <button id="pause-btn" class="hud-element top-4 right-4 pixel-button pointer-events-auto">||</button>
            
            <!-- Inventory Button -->
            <button id="inventory-btn" class="hud-element bottom-20 left-1/2 -translate-x-1/2 pixel-button pointer-events-auto text-xs">INV/CRAFT</button>
        </div>

        <!-- On-Screen Controls for Mobile -->
        <div id="mobile-controls" class="hidden md:hidden">
            <div class="d-pad">
                <button id="d-pad-left" class="d-pad-btn text-2xl">◀</button>
                <button id="d-pad-right" class="d-pad-btn text-2xl">▶</button>
            </div>
            <div class="action-buttons">
                <button id="jump-button" class="action-btn">JUMP</button>
                <button id="action-button" class="action-btn">ACT</button>
            </div>
        </div>
    </div>

    <!-- Pause Menu -->
    <div id="pause-menu" class="hidden absolute z-30 inset-0 bg-black bg-opacity-50 flex items-center justify-center">
        <div class="modal text-center space-y-4">
            <h2 class="text-2xl">Paused</h2>
            <p>World Code:</p>
            <p id="pause-world-code" class="text-3xl text-yellow-300 tracking-widest"></p>
            <button id="resume-btn" class="pixel-button">Resume</button>
            <button id="exit-btn" class="pixel-button">Exit to Menu</button>
        </div>
    </div>

    <!-- Inventory/Crafting Screen -->
    <div id="inventory-screen" class="hidden absolute z-20 inset-0 bg-black bg-opacity-75 p-4 md:p-8 flex flex-col md:flex-row gap-8">
        <div class="w-full md:w-1/2">
            <h2 class="text-xl mb-4">Inventory</h2>
            <div id="inventory-grid" class="p-4 bg-black bg-opacity-50 rounded"></div>
        </div>
        <div class="w-full md:w-1/2">
            <h2 class="text-xl mb-4">Crafting</h2>
            <div id="crafting-recipes" class="crafting-recipes p-4 bg-black bg-opacity-50 rounded h-full overflow-y-auto"></div>
        </div>
        <button id="close-inventory-btn" class="absolute top-4 right-4 pixel-button">X</button>
    </div>

    <!-- The main game script, loaded as a module -->
    <script type="module" src="main.js"></script>
</body>
</html>
